<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ملك اللغة العربيّة</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --indigo-50:#eef2ff;--indigo-100:#e0e7ff;--indigo-200:#c7d2fe;--indigo-300:#a5b4fc;
      --indigo-600:#4f46e5;--indigo-700:#4338ca;--purple-600:#7c3aed;--emerald-100:#d1fae5;
      --emerald-200:#a7f3d0;--emerald-500:#10b981;--emerald-700:#047857;--red-100:#fee2e2;
      --red-200:#fecaca;--red-500:#ef4444;--red-700:#b91c1c;--gray-600:#4b5563;--gray-700:#374151;
      --blue-500:#3b82f6;--purple-500:#8b5cf6;--teal-600:#0d9488;--emerald-500:#10b981;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Tajawal",system-ui,-apple-system,Segoe UI,Arial,sans-serif;
      background:linear-gradient(135deg,#dbeafe,#e9d5ff);
      min-height:100vh;display:flex;align-items:center;justify-content:center;padding:16px;
    }
    .card{
      width:100%;max-width:880px;background:#fff;border-radius:24px;
      padding:32px;border:1px solid var(--indigo-300);
      box-shadow:0 20px 40px rgba(67,56,202,.15);
      text-align:center;display:flex;flex-direction:column;align-items:center;
    }
    h1{margin:0 0 16px;font-size:46px;line-height:1.1;color:var(--indigo-700);font-weight:800;text-shadow:0 2px 0 #fff}
    h2{margin:0 0 12px;color:#1f2937;font-weight:800}
    p{color:#334155;margin:0 0 8px}
    .hidden{display:none!important}

    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:14px 28px;border-radius:999px;border:0;cursor:pointer;
      font-size:20px;font-weight:800;color:#fff;transition:.2s transform,.2s box-shadow,.2s opacity;
      box-shadow:0 10px 20px rgba(0,0,0,.08);
    }
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .btn-primary{background:linear-gradient(90deg,var(--blue-500),var(--purple-600))}
    .btn-start{background:linear-gradient(90deg,var(--emerald-500),var(--teal-600))}
    .btn:hover{transform:scale(1.03);box-shadow:0 14px 28px rgba(0,0,0,.12)}

    .input{
      width:100%;padding:14px 18px;font-size:18px;border-radius:999px;border:2px solid var(--indigo-200);
      background:var(--indigo-100);color:#111827;outline:none;text-align:right;
    }
    .input:focus{border-color:var(--indigo-300);box-shadow:0 0 0 3px rgba(99,102,241,.25)}

    .stack{display:flex;flex-direction:column;gap:16px;width:100%;max-width:520px;margin:auto}
    .muted{color:#475569}
    .kpi{display:flex;justify-content:space-between;gap:16px;color:#111827;margin:0 0 16px}
    .qbox{
      width:100%;background:var(--indigo-50);border:1px solid var(--indigo-200);
      border-radius:18px;padding:20px;text-align:right;box-shadow:inset 0 1px 8px rgba(79,70,229,.06);
      margin:0 0 22px;
    }
    .qbox p{margin:8px 0}
    .grid{display:grid;grid-template-columns:1fr;gap:12px;width:100%}
    @media(min-width:700px){.grid{grid-template-columns:1fr 1fr}}

    .opt{
      border:1px solid var(--indigo-300);background:#eef2ff;color:#1e293b;border-radius:14px;
      padding:14px 16px;font-size:20px;cursor:pointer;transition:.15s;
    }
    .opt:hover{filter:brightness(0.98)}
    .opt.correct{background:var(--emerald-200);border-color:var(--emerald-500);color:var(--emerald-700);transform:scale(1.02)}
    .opt.wrong{background:var(--red-200);border-color:var(--red-500);color:var(--red-700);transform:scale(1.02)}
    .opt.disabled{opacity:.7;cursor:not-allowed}

    .alert{
      margin:18px 0;padding:12px 16px;border-radius:10px;font-size:20px;font-weight:700;
    }
    .alert.ok{background:var(--emerald-100);color:var(--emerald-700)}
    .alert.bad{background:var(--red-100);color:var(--red-700)}
    .spacer{height:8px}
  </style>
</head>
<body>
  <main class="card" id="app">
    <h1>ملك اللغة العربيّة</h1>

    <!-- شاشة تسجيل الدخول -->
    <section id="screen-login" class="stack">
      <h2>أهلاً بك</h2>
      <p class="muted">أدخل اسمك وبريدك الإلكتروني لبدء التحدي.</p>
      <input id="name" class="input" type="text" placeholder="الاسم" />
      <p id="login-error" class="alert bad hidden"></p>
      <button id="btn-login" class="btn btn-primary">دخول</button>
    </section>

    <!-- شاشة البداية -->
    <section id="screen-start" class="stack hidden">
      <p class="muted" style="font-size:22px">أهلاً بك يا <b id="welcome-name" style="color:#4f46e5"></b></p>
      <p style="font-size:20px">اختبر معلوماتك في الشعر العربي.</p>
      <button id="btn-start" class="btn btn-start"><span style="font-size:26px">🚀</span> ابدأ المسابقة</button>
    </section>

    <!-- شاشة السؤال -->
    <section id="screen-quiz" class="stack hidden" style="width:100%;max-width:740px">
      <div class="kpi">
        <span>السؤال <b id="q-idx">1</b>/<b id="q-total">5</b></span>
        <span>النقاط: <b id="score">0</b></span>
      </div>

      <div class="qbox">
        <p style="font-size:26px;font-weight:800;color:#1e1b4b" id="q-text"></p>
        <p class="muted" style="font-size:18px">من قائل هذا البيت؟</p>
      </div>

      <div id="opts" class="grid"></div>

      <div id="feedback" class="alert hidden"></div>

      <button id="btn-next" class="btn btn-primary" disabled>
        <span id="next-label">السؤال التالي</span> <span style="font-size:22px">➡️</span>
      </button>
    </section>

    <!-- شاشة النتائج -->
    <section id="screen-result" class="stack hidden">
      <h2>النتائج النهائية</h2>
      <p style="font-size:24px">لقد أحرزت <b id="final-score" style="color:#059669"></b> من أصل <b id="final-total" style="color:#4f46e5"></b> نقاط.</p>
      <p id="final-msg" class="muted" style="font-size:18px"></p>
      <button id="btn-restart" class="btn btn-primary"><span style="font-size:24px">🔄</span> إعادة المسابقة</button>
    </section>
  </main>

  <script>
    // 1) الأسئلة
    const questions = [
      {
        questionText:"فانهلْ من الحبّ المصفّى إنّها*للحبّ نبعٌ خيّرٌ لا ينضُبُ",
        options:["عبدالله يوركي حلاق","محمد الفراتي","علي دمر","نبيه سلامة"],
        correctAnswer:"عبدالله يوركي حلاق",
      },
      {
        questionText:"تزقزِقُ الطّيرُ في أعلى خمائِلِها*فتنتشي النّفسُ بالألحان والطّرَبِ",
        options:["عبدالله يوركي حلاق","محمد الفراتي","علي دمر","نبيه سلامة"],
        correctAnswer:"نبيه سلامة",
      },
      {
        questionText:"فامضوا سراعاً للمعالي جهدَكم*مازالَ فيكم للعُلا استعدادُ",
        options:["عبدالله يوركي حلاق","محمد الفراتي","علي دمر","نبيه سلامة"],
        correctAnswer:"محمد الفراتي",
      },
      {
        questionText:"يا ويحَ مَنْ يشتري خصماً ليقتُلَهُ*بالمالِ، مهما يكن في شكّ إقلالِ",
        options:["عبدالله يوركي حلاق","محمد الفراتي","علي دمر","نبيه سلامة"],
        correctAnswer:"علي دمر",
      },
      {
        questionText:"بالحبّ نصنع ما نشاءُ من العُلا*وتذوبُ فيه فوارقُ الطّبقات",
        options:["نزار قباني","علي دمر","عبد الرحمن حيدر","نبيه سلامة"],
        correctAnswer:"عبد الرحمن حيدر",
      },
    ];

    // 2) الحالة
    let current = 0;
    let score = 0;
    let selected = null;
    let answeredCorrectly = false;
    let quizStarted = false;
    let isLoggedIn = false;
    let userName = "", 
    // 3) مراجع DOM
    const sLogin   = document.getElementById('screen-login');
    const sStart   = document.getElementById('screen-start');
    const sQuiz    = document.getElementById('screen-quiz');
    const sResult  = document.getElementById('screen-result');

    const nameInp  = document.getElementById('name');

    const loginErr = document.getElementById('login-error');
    const btnLogin = document.getElementById('btn-login');

    const welcome  = document.getElementById('welcome-name');
    const btnStart = document.getElementById('btn-start');

    const qIdx   = document.getElementById('q-idx');
    const qTot   = document.getElementById('q-total');
    const qText  = document.getElementById('q-text');
    const optsEl = document.getElementById('opts');
    const fb     = document.getElementById('feedback');
    const btnNext= document.getElementById('btn-next');
    const nextLabel = document.getElementById('next-label');
    const scoreEl = document.getElementById('score');

    const finalScore = document.getElementById('final-score');
    const finalTotal = document.getElementById('final-total');
    const finalMsg   = document.getElementById('final-msg');
    const btnRestart = document.getElementById('btn-restart');

    qTot.textContent = questions.length;

    // 4) تنقل الشاشات
    function show(el){[sLogin,sStart,sQuiz,sResult].forEach(e=>e.classList.add('hidden'));el.classList.remove('hidden')}
    function startQuiz(){
      quizStarted = true;
      current = 0; score = 0; selected = null; answeredCorrectly = false;
      scoreEl.textContent = score;
      renderQuestion();
      show(sQuiz);
    }

    // 5) تسجيل الدخول
    btnLogin.addEventListener('click', () => {
      const n = nameInp.value.trim();
      loginErr.classList.add('hidden');
      userName=n; isLoggedIn=true;
      welcome.textContent=userName;
      show(sStart);
    });

    // 6) بداية وإعادة
    btnStart.addEventListener('click', startQuiz);
    btnRestart.addEventListener('click', ()=>{show(sStart)});

    // 7) عرض السؤال
    function renderQuestion(){
      const q = questions[current];
      qIdx.textContent = current+1;
      qText.textContent = `"${q.questionText}"`;
      optsEl.innerHTML = '';
      selected = null; answeredCorrectly=false;
      fb.classList.add('hidden'); fb.textContent='';
      btnNext.disabled = true;
      nextLabel.textContent = current === questions.length-1 ? 'إنهاء المسابقة' : 'السؤال التالي';

      q.options.forEach(opt=>{
        const b=document.createElement('button');
        b.className='opt';
        b.textContent=opt;
        b.addEventListener('click',()=>{
          if(selected!==null) return;
          selected=opt;
          const ok = opt===q.correctAnswer;
          answeredCorrectly = ok;
          if(ok){
            b.classList.add('correct');
            score+=1; scoreEl.textContent=score;
            fb.textContent='إجابة صحيحة! 🎉';
            fb.className='alert ok';
          }else{
            b.classList.add('wrong');
            fb.textContent=`إجابة خاطئة. الإجابة الصحيحة هي: ${q.correctAnswer}`;
            fb.className='alert bad';
          }
          fb.classList.remove('hidden');
          // تعطيل باقي الأزرار
          [...optsEl.children].forEach(ch=>{
            if(ch!==b){ch.classList.add('disabled')}
            ch.disabled=true;
          });
          btnNext.disabled=false;
        });
        optsEl.appendChild(b);
      });
    }

    // 8) التالي
    btnNext.addEventListener('click',()=>{
      if(selected===null) return;
      const next = current+1;
      if(next<questions.length){
        current=next;
        renderQuestion();
      }else{
        // نتائج
        finalScore.textContent = score;
        finalTotal.textContent = questions.length;
        let msg='';
        if(score===questions.length){msg='أنت بالفعل ملك اللغة العربية! 🏆'}
        else if(score>=questions.length/2){msg='أحسنت. أداء جيد. استمر.'}
        else{msg='لا بأس. جرّب مرة أخرى.'}
        finalMsg.textContent = msg;
        show(sResult);
      }
    });

    // بدء على شاشة الدخول
    show(sLogin);
  </script>
</body>
</html>
